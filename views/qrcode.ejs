<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center">
            <svg class="w-8 h-8 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
            </svg>
            QR Code Access
        </h1>
        <p class="text-gray-600">Scan the QR code below to quickly connect to the file sharing network</p>
    </div>

    <!-- QR Code Information Card -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900">Network Connection Info</h2>
        </div>
        
        <div class="p-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <!-- QR Code -->
                <div class="text-center">
                    <div class="bg-gray-50 rounded-lg p-6 inline-block">
                        <div id="qrcode-container" class="flex items-center justify-center">
                            <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"></div>
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">Point your camera at the QR code</p>
                </div>

                <!-- Connection Details -->
                <div class="space-y-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-2">Server URL</h3>
                        <div class="flex items-center justify-between bg-white rounded border p-3">
                            <code class="text-sm text-gray-900 font-mono"><%= url %></code>
                            <button onclick="copyToClipboard('<%= url %>')" class="text-blue-600 hover:text-blue-800 p-1">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-2">IP Address</h3>
                            <p class="text-lg font-semibold text-gray-900"><%= ip %></p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wide mb-2">Port</h3>
                            <p class="text-lg font-semibold text-gray-900"><%= port %></p>
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                        <h3 class="text-sm font-medium text-blue-900 mb-2">How to Connect:</h3>
                        <ol class="text-sm text-blue-800 space-y-1">
                            <li>1. Ensure your device is on the same network</li>
                            <li>2. Scan the QR code or enter the URL manually</li>
                            <li>3. Start sharing files instantly!</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="text-center">
        <a href="/" class="bg-slate-600 text-white px-6 py-3 rounded-lg hover:bg-slate-700 transition-colors duration-200 font-medium inline-flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to Files
        </a>
    </div>
</div>

<script>
// Generate QR code on page load
document.addEventListener('DOMContentLoaded', function() {
    const qrCodeContainer = document.getElementById('qrcode-container');
    const url = '<%= url %>';
    
    // Import QR code library and generate code
    const script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js';
    script.onload = function() {
        const qr = new QRious({
            element: document.createElement('canvas'),
            value: url,
            size: 200,
            level: 'M'
        });
        
        qrCodeContainer.innerHTML = '';
        qrCodeContainer.appendChild(qr.element);
    };
    document.head.appendChild(script);
});

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // Show feedback
        const button = event.target.closest('button');
        const originalHTML = button.innerHTML;
        button.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>';
        button.classList.add('text-green-600');
        
        setTimeout(() => {
            button.innerHTML = originalHTML;
            button.classList.remove('text-green-600');
        }, 2000);
    });
}
</script>